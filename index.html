<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Maritime Tracker üö¢</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Courier New', monospace;
            background: #001a33;
            color: #00d4ff;
        }
        header {
            background: #002147;
            padding: 20px;
            text-align: center;
            border-bottom: 3px solid #00d4ff;
        }
        h1 { 
            font-size: 2em;
            text-shadow: 0 0 20px #00d4ff;
            margin-bottom: 10px;
        }
        .btn {
            background: #00d4ff;
            color: #001a33;
            border: none;
            padding: 10px 20px;
            font-size: 0.9em;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            border-radius: 4px;
            font-weight: bold;
            margin: 5px;
        }
        .btn:disabled { background: #004466; }
        
        #map { 
            height: 500px;
            width: 100%;
            background: #001a33;
        }
        .info {
            background: #002147;
            padding: 20px;
            text-align: center;
            border-top: 3px solid #00d4ff;
        }
        .stat {
            display: inline-block;
            margin: 0 20px;
        }
        .stat-number {
            font-size: 2em;
            color: #00d4ff;
        }
        footer {
            text-align: center;
            padding: 20px;
            color: #0099cc;
        }
    </style>
</head>
<body>
    <header>
        <h1>‚öì MARITIME TRACKER üö¢</h1>
        <p style="color: #0099cc; margin: 10px 0;">Live Ships & Incidents</p>
        <button class="btn" onclick="window.updateShips()">UPDATE SHIPS</button>
        <button class="btn" onclick="window.updateIncidents()">UPDATE INCIDENTS</button>
        <div id="status" style="color: #0099cc; margin-top: 10px; font-size: 0.9em;">
            Loading map...
        </div>
    </header>

    <div id="map"></div>

    <div class="info">
        <div class="stat">
            <div class="stat-number" id="shipCount">0</div>
            <div style="color: #0099cc;">Ships</div>
        </div>
        <div class="stat">
            <div class="stat-number" id="incidentCount">0</div>
            <div style="color: #0099cc;">Incidents</div>
        </div>
    </div>

    <footer>
        <p>Maritime Tracking & Incident Reports</p>
        <p>üî± Built by TridentIntelFree</p>
    </footer>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        var map = null;
        var shipMarkers = [];
        var incidentMarkers = [];
        
        // Wait for page to fully load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Initializing map...');
            
            try {
                // Initialize map
                map = L.map('map').setView([25, -30], 3);
                
                // Add tile layer
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    maxZoom: 19,
                    attribution: '¬© OpenStreetMap'
                }).addTo(map);
                
                document.getElementById('status').textContent = '‚úÖ Map loaded - Click buttons to add data';
                console.log('Map initialized successfully');
                
                // Add initial data
                loadInitialData();
                
            } catch (error) {
                console.error('Map error:', error);
                document.getElementById('status').textContent = '‚ùå Map failed: ' + error.message;
            }
        });
        
        function loadInitialData() {
            // Add sample ships
            var ships = [
                {lat: 40.7, lng: -74.0, name: "ATLANTIC CARGO"},
                {lat: 51.5, lng: -0.1, name: "EUROPA CONTAINER"},
                {lat: 35.7, lng: 139.7, name: "PACIFIC TANKER"}
            ];
            
            ships.forEach(function(ship) {
                var marker = L.circleMarker([ship.lat, ship.lng], {
                    radius: 8,
                    fillColor: '#00d4ff',
                    color: '#00d4ff',
                    weight: 2,
                    opacity: 1,
                    fillOpacity: 0.8
                }).addTo(map);
                
                marker.bindPopup('<b>üö¢ ' + ship.name + '</b><br>Sample vessel');
                shipMarkers.push(marker);
            });
            
            // Add sample incidents
            var incidents = [
                {lat: 12.5, lng: 43.5, type: "Piracy Attempt"},
                {lat: 6.0, lng: 80.0, type: "Suspicious Activity"}
            ];
            
            incidents.forEach(function(inc) {
                var marker = L.circleMarker([inc.lat, inc.lng], {
                    radius: 8,
                    fillColor: '#ff3333',
                    color: '#ff3333',
                    weight: 2,
                    opacity: 1,
                    fillOpacity: 0.7
                }).addTo(map);
                
                marker.bindPopup('<b>‚ö†Ô∏è ' + inc.type + '</b><br>Maritime incident');
                incidentMarkers.push(marker);
            });
            
            document.getElementById('shipCount').textContent = ships.length;
            document.getElementById('incidentCount').textContent = incidents.length;
        }
        
        window.updateShips = function() {
            if (!map) {
                alert('Map not loaded yet');
                return;
            }
            
            document.getElementById('status').textContent = 'Updating ships...';
            
            // Clear old markers
            shipMarkers.forEach(function(m) { map.removeLayer(m); });
            shipMarkers = [];
            
            // Add new random ships
            setTimeout(function() {
                var count = 5 + Math.floor(Math.random() * 5);
                
                for (var i = 0; i < count; i++) {
                    var lat = (Math.random() - 0.5) * 140;
                    var lng = (Math.random() - 0.5) * 360;
                    
                    var marker = L.circleMarker([lat, lng], {
                        radius: 8,
                        fillColor: '#00d4ff',
                        color: '#00d4ff',
                        weight: 2,
                        opacity: 1,
                        fillOpacity: 0.8
                    }).addTo(map);
                    
                    marker.bindPopup('<b>üö¢ VESSEL ' + (i+1) + '</b><br>Updated position');
                    shipMarkers.push(marker);
                }
                
                document.getElementById('shipCount').textContent = count;
                document.getElementById('status').textContent = '‚úÖ Ships updated';
            }, 1000);
        };
        
        window.updateIncidents = function() {
            if (!map) {
                alert('Map not loaded yet');
                return;
            }
            
            document.getElementById('status').textContent = 'Updating incidents...';
            
            // Clear old markers
            incidentMarkers.forEach(function(m) { map.removeLayer(m); });
            incidentMarkers = [];
            
            // Add new incidents
            setTimeout(function() {
                var hotspots = [
                    {lat: 12, lng: 45},
                    {lat: 6, lng: 80},
                    {lat: -2, lng: 48}
                ];
                
                var count = 2 + Math.floor(Math.random() * 4);
                
                for (var i = 0; i < count; i++) {
                    var spot = hotspots[Math.floor(Math.random() * hotspots.length)];
                    var lat = spot.lat + (Math.random() - 0.5) * 5;
                    var lng = spot.lng + (Math.random() - 0.5) * 8;
                    
                    var marker = L.circleMarker([lat, lng], {
                        radius: 8,
                        fillColor: '#ff3333',
                        color: '#ff3333',
                        weight: 2,
                        opacity: 1,
                        fillOpacity: 0.7
                    }).addTo(map);
                    
                    marker.bindPopup('<b>‚ö†Ô∏è INCIDENT</b><br>Maritime security event');
                    incidentMarkers.push(marker);
                }
                
                document.getElementById('incidentCount').textContent = count;
                document.getElementById('status').textContent = '‚úÖ Incidents updated';
            }, 1000);
        };
    </script>
</body>
</html>
